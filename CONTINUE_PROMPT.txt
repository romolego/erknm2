ПРОДОЛЖЕНИЕ РАБОТЫ НАД ПРОЕКТОМ ERKNM

Контекст:
Разрабатывается робот сбора данных ФГИС ЕРКНМ. Проект на Python с Playwright для браузерной автоматизации.

ПРОБЛЕМА:
При массовой загрузке мета-XML файлов сервер принудительно разрывает соединения при использовании прямых HTTP-запросов через requests:
- ConnectionResetError(10054, 'Удаленный хост принудительно разорвал существующее подключение')
- Прямые HTTP-запросы блокируются сервером

ЧТО РАБОТАЕТ:
✅ Скачивание list.xml через Playwright (erknm/browser/downloader.py) - работает отлично
✅ Парсинг list.xml - работает
✅ База данных PostgreSQL - настроена и работает
✅ Веб-интерфейс на http://localhost:5000 - работает

ЧТО НЕ РАБОТАЕТ:
❌ Скачивание мета-XML файлов через requests.get() в erknm/parser/meta_parser.py
❌ Сервер блокирует прямые HTTP-запросы к мета-XML файлам

ЗАДАЧА:
Переделать скачивание мета-XML файлов с использования requests на браузерную автоматизацию через Playwright, аналогично тому, как это сделано для list.xml в erknm/browser/downloader.py.

ТРЕБОВАНИЯ:
1. Создать erknm/browser/meta_downloader.py для скачивания мета-XML через Playwright
2. Изменить erknm/parser/meta_parser.py - убрать requests.get, использовать Playwright
3. Имитировать человеческое поведение:
   - Открыть страницу с мета-XML
   - Дождаться загрузки (wait_for_load_state)
   - Скачать файл через браузер
   - Задержки 3-5 секунд между запросами
4. Добавить retry механизм для ошибок браузера
5. Сохранить существующую логику обработки в erknm/sync/synchronizer.py

СТРУКТУРА:
- erknm/browser/downloader.py - пример рабочего кода для list.xml (использовать как образец)
- erknm/parser/meta_parser.py - нужно переделать download_meta_xml()
- erknm/sync/synchronizer.py - использует download_meta_xml()

URL мета-XML:
https://proverki.gov.ru/blob/opendata/7710146102-inspection-2025-9.xml
https://proverki.gov.ru/blob/opendata/7710146102-plan-2025.xml

ВАЖНО:
- Playwright уже установлен и работает
- Нужно имитировать человеческое поведение, не делать прямые запросы
- Добавить задержки между запросами
- Обработать ошибки и добавить retry







